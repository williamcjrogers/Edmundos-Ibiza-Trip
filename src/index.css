body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

/* Cigar intro animation */
.cigar-intro-overlay {
	position: fixed;
	inset: 0;
	background: rgba(13, 8, 6, 0.94);
	z-index: 9999;
	display: flex;
	align-items: center;
	justify-content: center;
	pointer-events: none;
	animation: overlay-fade 6.5s ease forwards;
}

.cigar-path {
	position: relative;
	width: 100vw;
	max-width: 760px;
	height: 160px;
	overflow: visible;
}

.cigar {
	position: absolute;
	left: -220px;
	top: 50%;
	transform: translate3d(0, -50%, 0);
	width: 220px;
	height: 44px;
	border-radius: 22px;
	background: linear-gradient(90deg, #3b2a22 0%, #6a4a3a 40%, #2b1b14 100%);
	box-shadow: inset 0 0 10px rgba(0,0,0,0.6), 0 10px 26px rgba(0,0,0,0.5);
	animation: cigar-slide 6.0s ease-out 0.2s forwards;
	will-change: transform, opacity;
	backface-visibility: hidden;
}

.cigar-band {
	position: absolute;
	left: 45%;
	top: 50%;
	transform: translate(-50%, -50%);
	width: 30px;
	height: 46px;
	border-radius: 8px;
	background: radial-gradient(circle at 50% 50%, rgba(240,220,90,0.9) 0%, rgba(210,180,60,0.9) 60%, rgba(120,80,20,0.9) 100%);
	border: 2px solid rgba(100,60,10,0.9);
	box-shadow: 0 0 6px rgba(201,148,58,0.5);
}

.cigar-band-label {
	position: absolute;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%) rotate(-90deg);
	transform-origin: center;
	font-family: 'Playfair Display', Georgia, serif;
	font-weight: 700;
	font-size: 10px;
	letter-spacing: 0.12em;
	color: #4A2C1A;
	text-shadow: 0 1px 0 rgba(255,255,255,0.4);
}

.cigar-wrapper-lines {
	position: absolute;
	inset: 0;
	border-radius: 22px;
	background-image:
		linear-gradient(90deg, rgba(0,0,0,0.12) 8%, rgba(0,0,0,0) 12%),
		linear-gradient(90deg, rgba(255,255,255,0.06) 10%, rgba(255,255,255,0) 10%);
	background-size: 20px 100%, 24px 100%;
	opacity: 0.35;
}

.cigar-ash {
	position: absolute;
	right: -12px;
	top: 50%;
	transform: translateY(-50%);
	width: 16px;
	height: 32px;
	border-radius: 8px;
	background: radial-gradient(circle at 50% 100%, #c5c5c5 0%, #8f8f8f 45%, #5a5a5a 80%);
	filter: blur(0.4px);
	box-shadow: inset 0 -2px 4px rgba(0,0,0,0.2);
}

.ember {
	position: absolute;
	left: -14px;
	top: 50%;
	transform: translate3d(-50%, -50%, 0);
	width: 26px;
	height: 26px;
	border-radius: 50%;
	background: radial-gradient(circle, rgba(255,150,70,0.95) 0%, rgba(255,80,0,0.85) 35%, rgba(120,20,0,0.15) 70%);
	filter: blur(0.6px);
	animation: ember-flicker 1.4s infinite alternate ease-in-out, ember-trail 6.0s ease-out 0.2s forwards;
	will-change: transform, opacity, box-shadow;
	backface-visibility: hidden;
}

.smoke {
	position: absolute;
	left: 0;
	top: 50%;
	width: 2px;
	height: 2px;
	border-radius: 50%;
	background: transparent;
	box-shadow:
		0 0 0 0 rgba(200,200,200,0.0),
		50px -50px 24px 14px rgba(200, 200, 200, 0.06),
		100px -110px 34px 20px rgba(210, 210, 210, 0.07),
		150px -170px 44px 26px rgba(220, 220, 220, 0.08);
	animation: smoke-rise 6.0s ease-out 0.2s forwards;
	will-change: opacity, box-shadow;
	backface-visibility: hidden;
}
.smoke2 {
	filter: blur(1.2px);
	opacity: 0.8;
	animation-duration: 6.8s;
}
.smoke3 {
	filter: blur(1.8px);
	opacity: 0.6;
	animation-duration: 7.4s;
}

.smoke-cloud {
	position: absolute;
	left: 10px;
	top: 50%;
	width: 28px;
	height: 28px;
	border-radius: 50%;
	background: radial-gradient(circle, rgba(230,230,230,0.13), rgba(230,230,230,0.03) 60%, rgba(230,230,230,0.0) 70%);
	filter: blur(2px);
	animation: cloud-expand 6.6s ease-out 0.3s forwards;
	will-change: transform, opacity;
}
.cloud2 { width: 38px; height: 38px; left: 0; animation-delay: 0.5s; filter: blur(2.5px); }
.cloud3 { width: 50px; height: 50px; left: -12px; animation-delay: 0.7s; filter: blur(3px); }

@keyframes cigar-slide {
	0% { transform: translate3d(-220px, -50%, 0); opacity: 0; }
	10% { opacity: 1; }
	100% { transform: translate3d(calc(100vw - 220px), -50%, 0); opacity: 1; }
}

@keyframes ember-trail {
	0% { transform: translate3d(-50%, -50%, 0); opacity: 0.95; }
	100% { transform: translate3d(calc(100vw - 220px - 50%), -50%, 0); opacity: 0.7; }
}

@keyframes ember-flicker {
	0% { filter: blur(0.6px) brightness(1); box-shadow: 0 0 26px rgba(255,80,0,0.55); }
	100% { filter: blur(1px) brightness(1.25); box-shadow: 0 0 40px rgba(255,120,0,0.75); }
}

@keyframes smoke-rise {
	0% { opacity: 0.0; }
	20% { opacity: 0.35; }
	100% { opacity: 0.0; }
}

@keyframes overlay-fade {
	0% { opacity: 1; }
	85% { opacity: 1; }
	100% { opacity: 0; }
}

@keyframes cloud-expand {
	0% { transform: translate3d(0, -50%, 0) scale(0.6); opacity: 0.0; }
	20% { opacity: 0.25; }
	70% { opacity: 0.35; }
	100% { transform: translate3d(60px, -120px, 0) scale(2.2); opacity: 0.0; }
}

/* Mobile fine-tuning */
@media (max-width: 480px) {
	.cigar-path { max-width: 100vw; height: 140px; }
	.cigar { width: 200px; height: 40px; }
	@keyframes cigar-slide {
		0% { transform: translate3d(-200px, -50%, 0); opacity: 0; }
		10% { opacity: 1; }
		100% { transform: translate3d(calc(100vw - 200px), -50%, 0); opacity: 1; }
	}
	@keyframes ember-trail {
		0% { transform: translate3d(-50%, -50%, 0); opacity: 0.95; }
		100% { transform: translate3d(calc(100vw - 200px - 50%), -50%, 0); opacity: 0.7; }
	}
}
